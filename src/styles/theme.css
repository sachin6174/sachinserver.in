/* Design System Tokens and Theme Foundation */

/* Palettes */
:root {
  /* Neutral (Slate) */
  --neutral-50:#f8fafc; --neutral-100:#f1f5f9; --neutral-200:#e2e8f0; --neutral-300:#cbd5e1; --neutral-400:#94a3b8;
  --neutral-500:#64748b; --neutral-600:#475569; --neutral-700:#334155; --neutral-800:#1f2937; --neutral-900:#0f172a; --neutral-950:#020617;

  /* Brand (Indigo) */
  --brand-50:#eef2ff; --brand-100:#e0e7ff; --brand-200:#c7d2fe; --brand-300:#a5b4fc; --brand-400:#818cf8;
  --brand-500:#6366f1; --brand-600:#4f46e5; --brand-700:#4338ca; --brand-800:#3730a3; --brand-900:#312e81; --brand-950:#1e1b4b;

  /* Secondary (Sky) */
  --secondary-50:#f0f9ff; --secondary-100:#e0f2fe; --secondary-200:#bae6fd; --secondary-300:#7dd3fc; --secondary-400:#38bdf8;
  --secondary-500:#0ea5e9; --secondary-600:#0284c7; --secondary-700:#0369a1; --secondary-800:#075985; --secondary-900:#0c4a6e; --secondary-950:#082f49;

  /* Semantic */
  --success-50:#ecfdf5; --success-100:#d1fae5; --success-200:#a7f3d0; --success-300:#6ee7b7; --success-400:#34d399; --success-500:#10b981; --success-600:#059669; --success-700:#047857; --success-800:#065f46; --success-900:#064e3b;
  --warning-50:#fffbeb; --warning-100:#fef3c7; --warning-200:#fde68a; --warning-300:#fcd34d; --warning-400:#f59e0b; --warning-500:#d97706; --warning-600:#b45309; --warning-700:#92400e; --warning-800:#78350f; --warning-900:#451a03;
  --danger-50:#fef2f2; --danger-100:#fee2e2; --danger-200:#fecaca; --danger-300:#fca5a5; --danger-400:#f87171; --danger-500:#ef4444; --danger-600:#dc2626; --danger-700:#b91c1c; --danger-800:#991b1b; --danger-900:#7f1d1d;
  --info-50:#ecfeff; --info-100:#cffafe; --info-200:#a5f3fc; --info-300:#67e8f9; --info-400:#22d3ee; --info-500:#06b6d4; --info-600:#0891b2; --info-700:#0e7490; --info-800:#155e75; --info-900:#164e63;

  /* Typography */
  --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  --font-mono: 'JetBrains Mono', 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;

  --font-display-size:48px; --font-display-lh:1.1;
  --font-h1-size:32px; --font-h1-lh:1.2; --font-h2-size:28px; --font-h2-lh:1.25; --font-h3-size:24px; --font-h3-lh:1.3;
  --font-h4-size:20px; --font-h4-lh:1.35; --font-h5-size:18px; --font-h5-lh:1.4; --font-h6-size:16px; --font-h6-lh:1.4;
  --font-body-lg:18px; --font-body:16px; --font-body-sm:14px; --font-caption:12px; --font-code:14px;
  --lh-body:1.7; --lh-tight:1.2; --tracking-tight:-0.01em; --tracking-normal:0; --tracking-wide:0.02em;

  /* Spacing (4/8px scale) */
  --space-0:0; --space-1:4px; --space-2:8px; --space-3:12px; --space-4:16px; --space-5:20px; --space-6:24px; --space-8:32px; --space-10:40px; --space-12:48px; --space-16:64px;

  /* Radius */
  --radius-xs:4px; --radius-sm:6px; --radius-md:8px; --radius-lg:12px; --radius-xl:16px; --radius-2xl:24px; --radius-round:9999px;

  /* Border widths */
  --border-0:0; --border-1:1px; --border-2:2px; --border-3:3px;

  /* Shadows */
  --shadow-sm:0 1px 2px rgba(0,0,0,0.07);
  --shadow-md:0 4px 8px -2px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.06);
  --shadow-lg:0 10px 15px -3px rgba(0,0,0,0.12), 0 4px 6px -4px rgba(0,0,0,0.08);
  --shadow-xl:0 20px 25px -5px rgba(0,0,0,0.18), 0 10px 10px -5px rgba(0,0,0,0.1);
  --shadow-focus:0 0 0 3px color-mix(in srgb, var(--primary) 25%, transparent);

  /* Motion */
  --duration-100:100ms; --duration-150:150ms; --duration-200:200ms; --duration-300:300ms; --duration-500:500ms;
  --ease-standard:cubic-bezier(.2,0,0,1); --ease-decelerate:cubic-bezier(0,0,.2,1); --ease-accelerate:cubic-bezier(.4,0,1,1);

  /* Z-index */
  --z-base:0; --z-header:100; --z-sticky:200; --z-dropdown:1000; --z-overlay:1100; --z-modal:1200; --z-popover:1300; --z-toast:1400; --z-tooltip:1500;

  /* Role tokens (Light by default) */
  --bg: var(--neutral-50);
  --surface: #ffffff;
  --surface-2: var(--neutral-100);
  --surface-hover: color-mix(in srgb, var(--brand-500) 5%, #ffffff);
  --surface-active: color-mix(in srgb, var(--brand-500) 8%, #ffffff);

  --text: var(--neutral-900);
  --text-secondary: var(--neutral-600);
  --text-muted: var(--neutral-500);

  --border: var(--neutral-200);
  --divider: var(--neutral-200);

  --primary: var(--brand-600);
  --primary-contrast: #ffffff;
  --accent: var(--secondary-500);
  --accent-contrast: #ffffff;

  --success: var(--success-600);
  --warning: var(--warning-600);
  --danger: var(--danger-600);
  --info: var(--info-600);

  --code-bg: var(--neutral-100);
}

/* Dark mode overrides */
body.dark-mode {
  --bg: var(--neutral-900);
  --surface: var(--neutral-800);
  --surface-2: var(--neutral-700);
  --surface-hover: color-mix(in srgb, var(--brand-400) 8%, var(--neutral-800));
  --surface-active: color-mix(in srgb, var(--brand-400) 14%, var(--neutral-800));

  --text: var(--neutral-50);
  --text-secondary: var(--neutral-300);
  --text-muted: var(--neutral-400);

  --border: var(--neutral-700);
  --divider: var(--neutral-700);

  --primary: var(--brand-400);
  --primary-contrast: #0b1020;
  --accent: var(--secondary-400);
  --accent-contrast: #0b1020;

  --success: var(--success-400);
  --warning: var(--warning-400);
  --danger: var(--danger-400);
  --info: var(--info-400);

  --code-bg: var(--neutral-900);
}

/* High contrast mode */
body.high-contrast-mode {
  --bg:#000; --surface:#000; --surface-2:#000;
  --text:#fff; --text-secondary:#fff; --text-muted:#ccc;
  --border:#fff; --divider:#fff;
  --primary:#0ff; --primary-contrast:#000; --accent:#ff0; --accent-contrast:#000;
  --success:#0f0; --warning:#ff0; --danger:#f00; --info:#0ff;
  --code-bg:#000;

  --shadow-sm:none; --shadow-md:none; --shadow-lg:none; --shadow-xl:none; --shadow-focus:0 0 0 3px #0ff;
}

/* Compatibility mappings for existing variables */
:root, body.light-mode, body.dark-mode, body.high-contrast-mode {
  --background-color: var(--bg);
  --text-color: var(--text);
  --card-background: var(--surface);
  --border-color: var(--border);
  --border-color-light: var(--divider);
  --hover-background: var(--surface-hover);
  --active-background: var(--surface-active);
  --primary-color: var(--primary);
  --primary-color-dark: var(--brand-700);
  --secondary-color: var(--accent);
  --secondary-color-dark: var(--secondary-700);
  --success-color: var(--success);
  --warning-color: var(--warning);
  --error-color: var(--danger);
  --info-color: var(--info);
  --code-background: var(--code-bg);
  --pre-background: var(--surface-2);
}

/* Base color-scheme hint for form controls */
body.light-mode { color-scheme: light; }
body.dark-mode { color-scheme: dark; }

/* Focus Ring: visible, accessible */
:where(a, button, input, textarea, select, summary, [role="button"], [tabindex]:not([tabindex="-1"])):focus-visible {
  outline: none;
  box-shadow: var(--shadow-focus);
  border-radius: max(2px, var(--radius-xs));
}

/* Utility: apply consistent focus ring on demand */
.focus-ring:focus-visible {
  outline: none;
  box-shadow: var(--shadow-focus);
  border-radius: max(2px, var(--radius-xs));
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
}

/* Minimal utilities for early adoption */
.u-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
}

.u-surface {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
}

.u-container {
  max-width: 1200px;
  margin-inline: auto;
  padding-inline: var(--space-4);
}

.u-prose {
  max-inline-size: 72ch;
}
