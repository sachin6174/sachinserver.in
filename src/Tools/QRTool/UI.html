<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Secure QR</title>
    <link rel="stylesheet" href="popup.css" />
    <script src="libs/crypto-js.min.js"></script>
    <script src="libs/jsQR.js"></script>
    <script src="libs/qrcode.min.js"></script>
</head>

<body>
    <div class="mainbox">
        <h1 class="app-name-label">YBV QR Encoder Decoder</h1>

        <div class="encrypt-decrypt-selection">
            <button id="makeQRButton" class="btn-1">Make QR</button>
            <button id="readQRButton" class="btn-2">Read QR</button>
        </div>

        <!-- Make QR View -->
        <div id="makeQRView" class="view">
            <div class="text-collection" style="text-align: center;">
                <label for="textToEncrypt" class="text-collection-label">Text to Encrypt</label><br>
                <textarea id="textToEncrypt" rows="7" column="3" placeholder="Enter text to generate QR"></textarea>
            </div>
            <div class="text-collection">
                <label for="makeEncryptionKey" class="text-collection-label">Encryption Key</label><br>
                <input type="password" id="makeEncryptionKey" placeholder="Enter encryption key">
            </div>
            <div class="password-collection">
                <label for="makeIterations" class="password-collection-label">Iterations</label><br>
                <input type="number" id="makeIterations" placeholder="Enter number of iterations">
            </div>
            <div class="single-element-centering">
                <button id="generateQRButton">Generate QR Code</button>
            </div>
            <div class="single-element-centering">
                <button id="downloadQRBtn">Download QR</button>
            </div>
            <div class="single-element-centering">
                <div id="qrCodeContainer"></div>
            </div>
        </div>

        <!-- Decode QR View -->
        <div id="decodeQRView" class="view" style="display: none;">
            <div class="upload-container">
                <label for="qrInput" id="uploadButton" class="btn-1">
                    Click to Upload QR
                </label>
                <input type="file" id="qrInput" accept="image/*" hidden>
                <p id="fileNameLabel">No file uploaded</p>
            </div>
            <div class="text-collection">
                <label for="decodeEncryptionKey" class="text-collection-label">Decryption Password</label><br>
                <input type="password" id="decodeEncryptionKey" placeholder="Enter encryption key">
            </div>
            <div class="password-collection">
                <label for="decodeIterations" class="password-collection-label">Iterations</label><br>
                <input type="number" id="decodeIterations" placeholder="Enter number of iterations">
            </div>
            <div class="single-element-centering">
                <button id="decryptButton">Decrypt</button>
            </div>
            <div class="result-display">
                <h3 class="result-display-label" id="resultLabel">Decrypted Data</h3>
                <canvas id="canvas" style="display: none;"></canvas>
                <textarea id="encryptedDecryptedData" rows="5" column="3" readonly></textarea>
                <div>
                    <button id="copyDataBtn" class="copy-button">Copy</button>
                </div>
            </div>
        </div>
    </div>
    <script type="module" src="CoreLogic.js"></script>
</body>

</html>